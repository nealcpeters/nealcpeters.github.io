
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>More on Data Structures: Circular Buffer - Neal Peters</title>
  <meta name="author" content="Neal Peters">

  
  <meta name="description" content="A circular buffer is a data structure that uses a fixed size buffer, which simulates being connected in a circle. It will remove the oldest element &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://nealcpeters.github.io/blog/2014/05/11/more-on-data-structures-circular-buffer">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Neal Peters" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=Open+Sans:400,700&subset=latin" rel="stylesheet" type="text/css" />
<link href='http://fonts.googleapis.com/css?family=Noto+Serif:400,700' rel='stylesheet' type='text/css'>
<!-- <link href="/favicon.png" rel="icon"> -->


  

</head>

<body    class="collapse-sidebar sidebar-footer" >
  <nav id="main-nav" role="navigation">
<ul class="main-navigation">
  <li><a href="/" class="nav-link">Blog</a></li>
  <li><a href="/blog/archives" class="nav-link">Archives</a></li>
  <!-- <li><a href="/atom.xml" class="nav-link">RSS</a></li> -->
  <li><a href="https://github.com/nealcpeters" class="nav-link">Github</a></li>
  <li><a href="https://twitter.com/nealcpeters" class="nav-link">Twitter</a></li>
  <li><a href="https://www.linkedin.com/in/nealcpeters" class="nav-link">LinkedIn</a></li>
</ul>

</nav>
  
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">More on Data Structures: Circular Buffer</h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-05-11T11:01:06-05:00" pubdate data-updated="true">May 11<span>th</span>, 2014</time>
        
      </p>
    
  </header>


<div class="entry-content"><p>A circular buffer is a data structure that uses a fixed size buffer, which simulates being connected in a circle. It will remove the oldest element first, regardless of its position in the structure. If the buffer is full, it starts overwriting the oldest elements.</p>

<p>This is pretty easy to model with an array, as the oldest information will always be at index 0, and Ruby’s built in shift method makes it simple to remove it.</p>

<p>Here’s what I came up with:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
<span class="line-number">27</span>
<span class="line-number">28</span>
<span class="line-number">29</span>
<span class="line-number">30</span>
<span class="line-number">31</span>
<span class="line-number">32</span>
<span class="line-number">33</span>
<span class="line-number">34</span>
<span class="line-number">35</span>
<span class="line-number">36</span>
</pre></td><td class="code"><pre><code class="ruby"><span class="line"><span class="k">class</span> <span class="nc">CircularBuffer</span>
</span><span class="line">
</span><span class="line">  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">limit</span><span class="p">)</span>
</span><span class="line">    <span class="vi">@limit</span> <span class="o">=</span> <span class="n">limit</span>
</span><span class="line">    <span class="vi">@buffer</span> <span class="o">=</span> <span class="o">[]</span>
</span><span class="line">  <span class="k">end</span>
</span><span class="line">
</span><span class="line">  <span class="k">def</span> <span class="nf">read</span>
</span><span class="line">    <span class="k">raise</span> <span class="no">BufferEmptyException</span> <span class="k">if</span> <span class="vi">@buffer</span><span class="o">.</span><span class="n">empty?</span>
</span><span class="line">    <span class="vi">@buffer</span><span class="o">.</span><span class="n">shift</span>
</span><span class="line">  <span class="k">end</span>
</span><span class="line">
</span><span class="line">  <span class="k">def</span> <span class="nf">write</span><span class="p">(</span><span class="n">element</span><span class="p">)</span>
</span><span class="line">    <span class="k">raise</span> <span class="no">BufferNilException</span> <span class="k">if</span> <span class="n">element</span> <span class="o">==</span> <span class="kp">nil</span>
</span><span class="line">    <span class="k">raise</span> <span class="no">BufferFullException</span> <span class="k">if</span> <span class="vi">@buffer</span><span class="o">.</span><span class="n">length</span> <span class="o">&gt;=</span> <span class="vi">@limit</span>
</span><span class="line">    <span class="vi">@buffer</span> <span class="o">&lt;&lt;</span> <span class="n">element</span>
</span><span class="line">  <span class="k">end</span>
</span><span class="line">
</span><span class="line">  <span class="k">def</span> <span class="nf">write!</span><span class="p">(</span><span class="n">element</span><span class="p">)</span>
</span><span class="line">    <span class="vi">@buffer</span><span class="o">.</span><span class="n">shift</span>
</span><span class="line">    <span class="vi">@buffer</span> <span class="o">&lt;&lt;</span> <span class="n">element</span>
</span><span class="line">  <span class="k">end</span>
</span><span class="line">
</span><span class="line">  <span class="k">def</span> <span class="nf">clear</span>
</span><span class="line">    <span class="vi">@buffer</span><span class="o">.</span><span class="n">clear</span>
</span><span class="line">  <span class="k">end</span>
</span><span class="line"><span class="k">end</span>
</span><span class="line">
</span><span class="line"><span class="k">class</span> <span class="nc">BufferNilException</span> <span class="o">&lt;</span> <span class="no">Exception</span>
</span><span class="line"><span class="k">end</span>
</span><span class="line">
</span><span class="line"><span class="k">class</span> <span class="nc">BufferEmptyException</span> <span class="o">&lt;</span> <span class="no">Exception</span>
</span><span class="line"><span class="k">end</span>
</span><span class="line">
</span><span class="line"><span class="k">class</span> <span class="nc">BufferFullException</span> <span class="o">&lt;</span> <span class="no">Exception</span>
</span><span class="line"><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Neal Peters</span></span>

      








  


<time datetime="2014-05-11T11:01:06-05:00" pubdate data-updated="true">May 11<span>th</span>, 2014</time>
      


    </p>
    
      <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://nealcpeters.github.io/blog/2014/05/11/more-on-data-structures-circular-buffer/" data-via="" data-counturl="http://nealcpeters.github.io/blog/2014/05/11/more-on-data-structures-circular-buffer/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2014/05/10/more-on-hash-tables/" title="Previous Post: More on Hash Tables">&laquo; More on Hash Tables</a>
      
      
        <a class="basic-alignment right" href="/blog/2014/05/14/javascript-and-hoisting/" title="Next Post: JavaScript and Hoisting">JavaScript and Hoisting &raquo;</a>
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    
  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - Neal Peters -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
